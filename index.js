/**
 * Created by Developer on 13/05/21.
 */
const BLManager = require("./app/manager");
const UtilMethods = require("lh-utilities/utilityMethods");
const Connection = require("./config/connection");
global.db_connection = undefined;

exports.getVerifyContract = async (event, context, callback) => {

    let db_connection;
    let parambody = {
        address:'xdceb037c9f0e987e7a46cc85d068223974ed7eedb2',
        byteCode:'0x6080604052600436106100955763ffffffff60e060020a60003504166311bf1119811461009a57806316f3a95b146101135780631958e89c1461013c578063419367071461017657806348630752146101ad5780634a024727146101eb57806398f7ceab14610212578063ba5a769114610239578063bfbab8bd14610260578063da7a37c014610287578063f6b45c46146102ae575b600080fd5b3480156100a657600080fd5b506100b26004356102ce565b604051808715151515815260200186600160a060020a0316600160a060020a0316815260200185600160a060020a0316600160a060020a03168152602001848152602001838152602001828152602001965050505050505060405180910390f35b34801561011f57600080fd5b5061013a60048035600160a060020a03169060200135610324565b005b34801561014857600080fd5b5061016360048035600160a060020a03169060200135610402565b6040805191825251602090910181900390f35b34801561018257600080fd5b5061013a600160a060020a03600480358216916020918201803590911691908101803591013561041f565b3480156101b957600080fd5b506101d460048035600160a060020a03169060200135610a66565b604080519115151515825251602090910181900390f35b3480156101f757600080fd5b506101d460048035600160a060020a03169060200135610c21565b34801561021e57600080fd5b506101d460048035600160a060020a03169060200135610d11565b34801561024557600080fd5b5061016360048035600160a060020a03169060200135610da0565b34801561026c57600080fd5b5061016360048035600160a060020a03169060200135610e45565b34801561029357600080fd5b506101d460048035600160a060020a03169060200135610e72565b61013a60048035600160a060020a03169060209081018035910135610f50565b600260208190526000918252604082208083015460018083015493830154600384015460049094015461010096870a80850460ff16979390930a909304600160a060020a03908116959290920490911692909186565b6000806103318484610d11565b8061034157506103418484610a66565b15156103bf576040805160e560020a62461bcd0281526004016020808201828103909252603282527f4572726f723a206d7573742068617665207472616e7366657220617070726f769181019182527f616c206f7220626520746865206f776e65720000000000000000000000000000908201528151910181900390fd5b6103c98484610e45565b600090815260026020808301918252018120808201805483151561010085900a90810260ff909102199091161790556003015550505050565b600160209081526000928352604080842090915290825290205481565b600080600080600061042f611420565b30600160a060020a031663da7a37c08a8a6040518363ffffffff1660e060020a0281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050602060405180830381600087803b15801561049257600080fd5b505af11580156104a6573d6000803e3d6000fd5b505050506040513d60208110156104bc57600080fd5b5051151515610518576040805160e560020a62461bcd0281526004016020808201828103909252601982527f546f6b656e20697320616c726561647920666f722073616c65000000000000009181019182529151910181900390fd5b88600160a060020a031633600160a060020a03161415156107595788955033600160a060020a031686600160a060020a0316636352211e8a6040518263ffffffff1660e060020a02815260040180828152602001915050602060405180830381600087803b15801561058957600080fd5b505af115801561059d573d6000803e3d6000fd5b505050506040513d60208110156105b357600080fd5b50516040805163081812fc63ffffffff811660e060020a02825260049091018c81529151600160a060020a0393841694909414985030831693928a1692909160209081019180830381600087803b15801561060d57600080fd5b505af1158015610621573d6000803e3d6000fd5b505050506040513d602081101561063757600080fd5b50516040805163e985e9c563ffffffff811660e060020a028252600160a060020a0333811681166004909301928352308116811660209384019081529351948116959095149850938a1693929181019180830381600087803b15801561069c57600080fd5b505af11580156106b0573d6000803e3d6000fd5b505050506040513d60208110156106c657600080fd5b5051925084806106d35750835b806106db5750825b1515610759576040805160e560020a62461bcd0281526004016020808201828103909252603282527f4572726f723a206d7573742068617665207472616e7366657220617070726f769181019182527f616c206f7220626520746865206f776e65720000000000000000000000000000908201528151910181900390fd5b6107638989610e45565b915081600014156108b857610778600061140d565b6107826000611419565b915060c0604051908101604052806001151581526020018b600160a060020a031681526020018a600160a060020a03168152602001898152602001888152602001838152509050806002600084815260200190815260200160002060008201518160000160006101000a81548160ff02191690831515021790555060208201518160000160016101000a815481600160a060020a030219169083600160a060020a0316021790555060408201518160010160006101000a815481600160a060020a030219169083600160a060020a03160217905550606082015181600201556080820151816003015560a0820151816004015590505081600160008b600160a060020a0316600160a060020a0316815260200190815260200160002060008a8152602001908152602001600020819055506109c2565b6002600083815260200190815260200160002060000160009054906101000a900460ff1615156000151514151561093c576040805160e560020a62461bcd0281526004016020808201828103909252601882527f4974656d20697320616c726561647920666f722073616c6500000000000000009181019182529151910181900390fd5b86600260008481526020019081526020016000206003018190555060016002600084815260200190815260200160002060000160006101000a81548160ff021916908315150217905550896002600084815260200190815260200160002060000160016101000a815481600160a060020a030219169083600160a060020a031602179055505b7faf185d475a485625e530f117810a6d9caf5c576634b20d4027901e5b12a47ae66002600084815260200190815260200160002060040154898b8a6040518085815260200184815260200183600160a060020a0316600160a060020a0316815260200182815260200194505050505060405180910390a1816002600084815260200190815260200160002060040154141515610a5a57fe5b50505050505050505050565b600080600080600086935033600160a060020a031684600160a060020a0316636352211e886040518263ffffffff1660e060020a02815260040180828152602001915050602060405180830381600087803b158015610ac457600080fd5b505af1158015610ad8573d6000803e3d6000fd5b505050506040513d6020811015610aee57600080fd5b50516040805163081812fc63ffffffff811660e060020a02825260049091018a81529151600160a060020a039384169490941496503083169392881692909160209081019180830381600087803b158015610b4857600080fd5b505af1158015610b5c573d6000803e3d6000fd5b505050506040513d6020811015610b7257600080fd5b50516040805163e985e9c563ffffffff811660e060020a028252600160a060020a033381168116600490930192835230811681166020938401908152935194811695909514965093881693929181019180830381600087803b158015610bd757600080fd5b505af1158015610beb573d6000803e3d6000fd5b505050506040513d6020811015610c0157600080fd5b505190508280610c0e5750815b80610c165750805b979650505050505050565b6000806000806000610c338787610e45565b93506002600085815260200190815260200160002060010160009054906101000a9004600160a060020a0316925082600160a060020a0316636352211e876040518263ffffffff1660e060020a02815260040180828152602001915050602060405180830381600087803b158015610caa57600080fd5b505af1158015610cbe573d6000803e3d6000fd5b505050506040513d6020811015610cd457600080fd5b50516000948552600260208087019182520185209094015460016101000a9004600160a060020a0390811681169416939093149695505050505050565b60008083600160a060020a0316636352211e846040518263ffffffff1660e060020a02815260040180828152602001915050602060405180830381600087803b158015610d5d57600080fd5b505af1158015610d71573d6000803e3d6000fd5b505050506040513d6020811015610d8757600080fd5b505133600160a060020a03908116911614949350505050565b600080610dab611420565b610db58585610e45565b600090815260026020808301828152810183206040805160c081019091528185015460ff61010096870a80830491909116151515158352600160a060020a0360019788900a90920482168216821683860190815296840154048116811616948301948552928101549382019384526003810154938201938452600401549201919091526080015195945050505050565b600160a060020a039182169091166000908152600160208083019182528101808320938352929052205490565b600080610e7d611420565b610e878585610e45565b91506002600083815260200190815260200160002060c060405190810160405290816000820160009054906101000a900460ff161515151581526020016000820160019054906101000a9004600160a060020a0316600160a060020a0316600160a060020a031681526020016001820160009054906101000a9004600160a060020a0316600160a060020a0316600160a060020a031681526020016002820154815260200160038201548152602001600482015481525050905080600001519250505092915050565b6000610f5a611420565b600080600080610f6a8989610d11565b1515610fe8576040805160e560020a62461bcd0281526004016020808201828103909252602282527f546f6b656e206973206e6f206c6f6e676572206f776e6564206279206c6973749181019182527f6572000000000000000000000000000000000000000000000000000000000000908201528151910181900390fd5b610ff28989610e45565b955084600001511515611052576040805160e560020a62461bcd0281526004016020808201828103909252601582527f546f6b656e206973206e6f7420666f722073616c6500000000000000000000009181019182529151910181900390fd5b6000868152600260208083018281528082018085206040805160c081019091528187015461010088810a80830460ff1615151515845260019182900a92839004600160a060020a0390811681168116858a0190815283870154839004821682168216908a01908152868b0154908a019081526003870154908a0190815260049096015495909801949094528e895287865284892001548e8952969094529186209095015490995093909204811696509104811693508381163390911614151515611169576040805160e560020a62461bcd0281526004016020808201828103909252601382527f43616e27742073656c6c20746f206f776e6572000000000000000000000000009181019182529151910181900390fd5b600260008781526020019081526020016000206003015434101515156111dc576040805160e560020a62461bcd0281526004016020808201828103909252600d82527f5072696365204368616e676564000000000000000000000000000000000000009181019182529151910181900390fd5b60006002600088815260200190815260200160002060000160006101000a81548160ff02191690831515021790555083600160a060020a03166323b872dd6002600089815260200190815260200160002060000160019054906101000a9004600160a060020a031633600260008b8152602001908152602001600020600201546040518463ffffffff1660e060020a0281526004018084600160a060020a0316600160a060020a0316815260200183600160a060020a0316600160a060020a031681526020018281526020019350505050600060405180830381600087803b1580156112c757600080fd5b505af11580156112db573d6000803e3d6000fd5b5050505060026000878152602001908152602001600020600301543410151515611352576040805160e560020a62461bcd0281526004016020808201828103909252601382527f4e6f7420456e6f756768205844432053656e74000000000000000000000000009181019182529151910181900390fd5b6002600087815260200190815260200160002060000160019054906101000a9004600160a060020a0316915081600160a060020a03166108fc889081150290604051600060405180830381858888f193505050509050801515611402576040805160e560020a62461bcd0281526004016020808201828103909252601282527f4661696c656420746f2073656e642058444300000000000000000000000000009181019182529151910181900390fd5b505050505050505050565b60000180546001019055565b6000015490565b6040805160c0810190915260008015158252600160a060020a0381166020808401828152810191825290810182815281018281520152905600a165627a7a72305820d7000d536c2ec4f6d65b6ed6162819a4fc1ea8c86849e07bf4d5d004034c62fd0029',
        
    }
    UtilMethods.lhtLog("getVerifyContract", "db_connection object null", "", "", "INFO");
    db_connection = await Connection.connectToDB();
    UtilMethods.lhtLog("getVerifyContract", "event", event, "", "INFO");
    const [error, response] = await UtilMethods.parseResponse(new BLManager().getVerifyContract(parambody));
    UtilMethods.lhtLog("index:getVerifyContract", "getVerifyContract response", { error, response }, "", "INFO");
    /*
    to Disconnect DB
     */
    await db_connection.connection.close().catch((error) => {
        console.log(error)
    });
    if (error)
        return error;
    return response;
};
